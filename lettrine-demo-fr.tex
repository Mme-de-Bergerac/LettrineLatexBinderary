
\documentclass[paper=a4,12pt,german,french]{scrartcl}
\usepackage{iftex}
\iftutex
  \usepackage{fontspec}
  \setmainfont{erewhon}
\else
  \usepackage[utf8]{inputenc}
  \usepackage{fourier}
  \renewcommand{\ttdefault}{lmtt} % Courier chasse trop !
\fi
\usepackage{microtype}
\usepackage{multicol,ragged2e}
\usepackage{Rothdn, Typocaps}   % cfr-initials (p. 3)

\usepackage{graphicx,color}
\usepackage{lettrine}
\usepackage{babel}
\frenchbsetup{AutoSpacePunctuation=false,og=«,fg=»}

\newcommand*{\MF}{{\small\scshape metafont}}
\newcommand*{\MP}{{\small\scshape metapost}}
\newcommand*{\file}[1]{\texttt{#1}}
\newcommand*{\cs}[1]{\texttt{\boi#1}}

\setlength{\parindent}{0pt}
\sloppy
\begin{document}
\thispagestyle{empty}

\begin{center}
\large\bfseries Quelques exemples de lettrines
\end{center}

\vspace{\baselineskip}
\textit{Usage standard (2 lignes) :}\\
\verb+\lettrine{E}{n} plein marais...+

\lettrine{E}{n} plein marais de la Souteyranne, à quelques kilomètres
au nord d'Aigues-Mortes, se trouve la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody.

\vspace{\baselineskip}
\textit{Lettrine sur une seule ligne (option {\ttfamily\upshape lines=1}) :}\\
\verb+\lettrine[lines=1]{E}{n} plein marais...+

\lettrine[lines=1]{E}{n} plein marais de la Souteyranne,
à quelques kilomètres au nord d'Aigues-Mortes, se trouve
la Tour Carbonnière.

\vspace{\baselineskip}
\textit{Lettrine sur trois lignes (option {\ttfamily\upshape lines=3}) :}\\
\verb+\lettrine[lines=3]{E}{n} plein marais...+

\lettrine[lines=3]{E}{n} plein marais de la Souteyranne,
à juste quelques kilomètres au nord d'Aigues-Mortes,
se trouve la Tour Carbonnière.
Elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.

\vspace{\baselineskip}
\textit{Lettrine complètement dans la marge} :\\
\verb+\lettrine[lhang=1, nindent=0pt, lines=3]{J}{ustement},...+

\lettrine[lhang=1, nindent=0pt, lines=3]{J}{ustement},
à quelques kilomètres au nord d'Aigues-Mortes,
se trouve la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.
L'abbaye était ravitaillée ---~dit-on ~--- par un souterrain
qui la reliait au château de Treillan.

\vspace{\baselineskip}
\textit{Lettrine en saillie à la fois en hauteur et dans la marge} :\\
\verb+\lettrine[lines=3, lhang=0.33, loversize=0.25]{E}{n} ...+

\lettrine[lines=3, lhang=0.33, loversize=0.25]{E}{n}
plein marais de la Souteyranne,
à quelques kilomètres au nord d'Aigues-Mortes la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que des vestiges.

\vspace{\baselineskip}
\textit{On peut ajouter un guillemet devant la lettrine} :\\
\verb+\lettrine[ante=«]{E}{n} plein marais ...+

\lettrine[ante=«]{E}{n} plein marais de la Souteyranne,
à quelques kilomètres au nord d'Aigues-Mortes, se trouve
la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody.

\newpage
Toutes Les lettrines suivantes  seront en gris jusqu'à nouvel ordre : \\
\verb+\renewcommand{\LettrineFontHook}{\color[gray]{0.5}}+
\renewcommand{\LettrineFontHook}{\color[gray]{0.5}}

\vspace{.5\baselineskip}
\textit{On diminue la taille de la lettrine de 10\% et on
la remonte de 10\%  à cause du « Q »}
\verb+\lettrine[lines=4, loversize=-0.1, lraise=0.1]{Q}{u'en...+

\lettrine[lines=4, loversize=-0.1, lraise=0.1]{Q}{u'en plein marais}
 de la Souteyranne, à quelques kilomètres au nord d'Aigues-Mortes,
se trouve la Tour Carbonnière, surprend les visiteurs.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.
L'abbaye était ravitaillée par un souterrain qui
la reliait au château de Treillan.

\vspace{.5\baselineskip}
\textit{Autre solution : ajout d’une ligne grâce à} \verb+depth+\\
\verb+\lettrine[lines=4,depth=1]{Q}{u'en plein marais} de ...+

\lettrine[lines=4,depth=1]{Q}{u'en plein marais} de la Souteyranne,
à quelques kilomètres au nord d'Aigues-Mortes,
se trouve la Tour Carbonnière, surprend les visiteurs.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.
L'abbaye était ravitaillée ---~dit-on~--- par un souterrain qui
la reliait au château de Treillan.

\vspace{.5\baselineskip}
\textit{Utilisation de l'option {\ttfamily\upshape slope}} pour que le texte
suive la pente du « À » :\\
\verb+\lettrine[lines=4, slope=0.6em, findent=-1em,+\\
\verb+          nindent=0.6em]{À}{quelques kilomètres}...+

\lettrine[lines=4, slope=0.6em, findent=-1em, nindent=0.6em]{À} {quelques
kilomètres} au nord d'Aigues-Mortes, se trouve  la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.
L'abbaye était ravitaillée ---~dit-on~--- par un souterrain qui
la reliait au château de Treillan.

\vspace{.5\baselineskip}
\textit{Utilisation de l'option {\ttfamily\upshape slope} pour que le texte
 suive la pente du {\ttfamily\upshape V}, noter que celui-ci est à
 demi-poussé dans la marge par l'option {\ttfamily\upshape lhang=0.5} :}\\
\verb+\lettrine[lines=4, slope=-0.5em, lhang=0.5, findent=.5em, nindent=0pt]+\\
\verb+  {V}{oici} à...+

\lettrine[lines=4, slope=-0.5em, lhang=0.5, findent=.5em, nindent=0pt]{V}{oici}
à quelques kilomètres au nord d'Aigues-Mortes la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.
L'abbaye était ravitaillée ---~dit-on~--- par un souterrain qui
la reliait au château de Treillan distant de quelques kilomètres à peine.

\newpage

\begin{center}
\large\bfseries Deux exemples d’utilisation de cfr-initials
\end{center}

\textit{Dans le préambule :}
\verb+\usepackage{Typocaps, Rothdn}+

\vspace{.5\baselineskip}
\textit{Changement de police (ici Typocaps)
  et de couleur pour la lettrine et sa suite :}\\
\verb+\renewcommand{\LettrineFontHook}{\Typocapsfamily\color{red}}+\\
\verb+\renewcommand{\LettrineTextFont}{\color{red}\scshape}+\\
\verb+\lettrine[findent=.3em]{E}{n plein marais de la Souteyranne}+

{% Groupe (changement local de fonte)
\renewcommand{\LettrineFontHook}{\Typocapsfamily\color{red}}
\renewcommand{\LettrineTextFont}{\color{red}\scshape}

\lettrine[findent=.3em]{E}{n plein marais de la Souteyranne}, à quelques
kilomètres au nord d'Aigues-Mortes, se trouve la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée.
\par}% Fin du groupe.

\vspace{.5\baselineskip}
\textit{Les quatre exemples suivants font appel à la police d’initiales Rothdn}\\
\verb+\renewcommand{\LettrineFontHook}{\Rothdnfamily}+

\renewcommand{\LettrineFontHook}{\Rothdnfamily}

\vspace{.5\baselineskip}

\textit{Le calcul de la taille de la lettrine prend normalement comme
  référence les lettres EFTZ (voir {\upshape\cs{LettrineTestString}}),
  dans le cas de la police Rothdn ça donne ceci pour A : }

\verb+\lettrine[lines=3]{A}{u} bord du marais+

\lettrine[lines=3]{A}{u} bord du marais de la Souteyranne, à quelques
kilomètres au nord d'Aigues-Mortes, se trouve la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.

\vspace{\baselineskip}
\textit{L’option {\ttfamily\upshape refstring} donne une taille correcte à la
  lettrine (le calcul est fait sur la base du A lui-même et non de EFTZ%
  \footnote{Le F de la police Rothdn a une hauteur supérieure à celles des
            autres lettres.} :
}

\verb+\lettrine[refstring, lines=3]{A}{u} bord du marais+

\lettrine[refstring, lines=3]{A}{u} bord du marais de la Souteyranne,
à quelques kilomètres au nord d'Aigues-Mortes, se trouve la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.


\vspace{\baselineskip}
\textit{Il suffit maintenant de remonter la lettrine
  ({\ttfamily\upshape lraise=0.15}) pour compenser sa profondeur :
}

\verb+\lettrine[refstring, lraise=0.15, lines=3]{A}{u} bord du marais+

\lettrine[refstring, lraise=0.15, lines=3]{A}{u} bord du marais de la
Souteyranne, à quelques kilomètres au nord d'Aigues-Mortes, se trouve
la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que quelques vestiges.

\newpage
\begin{center}
\large\bfseries Multicolonnes : Ajustement de \texttt{novskip}
\end{center}

\renewcommand{\LettrineFontHook}{}

Avec \texttt{loversize=0.2} pas de problème :

\vspace{\baselineskip}
\begin{multicols}{2}\RaggedRight
  \lettrine[loversize=0.2]{E}{n plein marais de la Souteyranne},
à quelques kilomètres au nord d'Aigues-Mortes la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que des vestiges.
\end{multicols}

Avec \texttt{loversize=0.6} il y a un gros décallage entre colonnes :

\vspace{\baselineskip}
\begin{multicols}{2}\RaggedRight
  \lettrine[loversize=0.6]{E}{n plein marais de la Souteyranne},
à quelques kilomètres au nord d'Aigues-Mortes la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que des vestiges.
\end{multicols}

Correction : ajouter \texttt{novskip=13pt} ($>$ Top vskip = 12.16344pt lu
dans le fichier \texttt{.log})

\begin{multicols}{2}\RaggedRight
  \lettrine[loversize=0.6,novskip=13pt]{E}{n plein marais de la Souteyranne},
à quelques kilomètres au nord d'Aigues-Mortes la Tour Carbonnière.
Construite au XIII\ieme~siècle, elle contrôlait l'unique voie d'accès
terrestre de la ville fortifiée, celle qui menait à Psalmody,
l'une des « abbayes de sel» dont il ne reste que des vestiges.
\end{multicols}


\newpage
\begin{center}
\large\bfseries Utilisation d'une image comme lettrine
\end{center}

\vspace{\baselineskip}
Si la lettrine souhaitée n'est pas un caractère d'une fonte mais une
image, \verb+\lettrine+ peut encore être utilisée, il suffit
d'utiliser le booléen \texttt{image}, exemple :

\begin{otherlanguage}{german}
\renewcommand{\LettrineTextFont}{\relax}
\fontfamily{yfrak}\fontencoding{T1}\selectfont\Large
\lettrine[image=true,lhang=.2, loversize=.25, findent=0.1em]
{W}{er} reitet so spät durch Nacht und Wind?\\
Es ist der Vater mit seinem Kind;\\
Er hat den Knaben wohl in dem Arm,\\
Er fa{\ss}t ihn sicher, er hält ihn warm.\par
\end{otherlanguage}

\vspace{.5\baselineskip}
Et voici le code \LaTeX{} correspondant ;
le  premier argument de \verb+\lettrine+ étant \verb+W+,
\verb+\lettrine+ fait appel au fichier \verb+W.pdf+, \verb+W.jpg+, etc. en
pdfLaTeX (omission possible du suffixe \verb+.eps+,  \verb+.pdf+, propriété
de \verb+graphicx.sty+).

\begin{verbatim}
\begin{otherlanguage}{german}
  \fontfamily{yfrak}\fontencoding{T1}\selectfont\Large
  \renewcommand{\LettrineTextFont}{\relax}
  \lettrine[image=true,lhang=.2, loversize=.25, findent=0.1em]
           {W}{er} reitet so spät durch Nacht und Wind?\\
  Es ist der Vater mit seinem Kind;\\
  Er hat den Knaben wohl in dem Arm,\\
  Er fa{\ss}t ihn sicher, er hält ihn warm.\par
\end{otherlanguage}
\end{verbatim}

Pour la compilation en pdfLaTeX cet exemple fait appel aux fichiers suivants :
\begin{itemize}
\item \texttt{graphicx.sty} (extension standard \LaTeXe{}),
\item \texttt{blackletter1} de Thorsten~\textsc{Bronger} (disponible sur CTAN),
\item les fontes gothiques « Fraktur » de Yannis~\textsc{Haralambous} type\,1
  \texttt{yfrak.pfb} disponibles sur CTAN).
\end{itemize}
L'initiale gothique « W » utilisée dans
cet exemple a été créée par \MP{} (fichier \texttt{W.pdf} ci-joint)
à partir du source \MF{} \texttt{yinitW.mf} de Yannis grâce aux précieuses
indications de Denis~\textsc{Roegel} que je remercie bien vivement.

\vspace{.5\baselineskip}
Une solution plus simple s’offre aux utilisateurs de LuaLaTeX ou XeLaTeX pour
reproduire le poème ci-dessus : il suffit d’utiliser la police OpenType Yinit
pour la lettrine et par exemple une des polices OpenType UnifrakturMaguntia
pour le texte, voir le fichier \file{demo-lua.pdf}.

\vfill
\begin{flushright}
  Daniel \textsc{Flipo}\\
  \texttt{daniel.flipo@free.fr}\\
  mars 2020.
\end{flushright}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% coding: utf-8
%%% TeX-master: t
%%% TeX-engine: xetex
%%% End:
